@using Kendo.Mvc.UI;
@model AsaludEcopetrol.Models.FFMM.CuidadosPaliativos
@{
    ViewBag.Title = "INGRESO CUIDADOS PALIATIVOS";
    Layout = "~/Views/Shared/_LayoutECOPETROL.cshtml";
}

<br />

<div class="container">
    <form id="formulario">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">INICIO AUDITORIA</h3>
            </div>
            <div class="panel-body">
                <div class="col-sm-3">
                    <label class="text-secondary_asalud">Fecha auditoria:</label>
                    <input class="datepickerr" value="" title="Este campo  es obligatorio*" style="width:100%" name="fecha_auditoria" id="fecha_auditoria" onchange="validarFecha()" required />
                </div>
                <div class="col-sm-3">
                    <label class="text-secondary_asalud">Unidad:</label>
                    <select class="form-control select2" required id="id_ref_ffmm_unidad_cp" name="id_ref_ffmm_unidad_cp">
                        <option value="">-Seleccione una opción-</option>
                        @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_unidad_satelite item in ViewBag.UnidadSatelite)
                        {
                            <option value="@item.id_ref_ffmm_unidad_satelite">@item.descripciion</option>
                        }
                    </select>
                </div>
                <div class="col-sm-3">
                    <label class="text-secondary_asalud">Tipo Visita:</label>
                    <select class="form-control select2" required id="id_ref_tipo_visita" name="id_ref_tipo_visita">
                        <option value="">-Seleccione una opción-</option>
                        @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_tipo_visita_cp item in ViewBag.TipoVisita)
                        {
                            <option value="@item.id_ref_ffmm_tipo_visita">@item.descripcion</option>
                        }
                    </select>
                </div>
                <div class="col-sm-3">
                    <label class="text-secondary_asalud">Número visita:</label>
                    <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="visita_numero" id="visita_numero" min="0" required />
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">DATOS USUARIO</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Departamento de la IPS:</label>
                        <select class="form-control select2" required id="departamento" name="departamento" onchange="GetMunicipioIPS($(this).val())">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.vw_ffmm_departamento item in ViewBag.Departamento)
                            {
                                <option value="@item.cod_departamento">@item.departamento</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-3 form-group">
                        <label class="text-secondary_asalud">Municipio de la IPS:</label>
                        <select class="form-control select2" id="municipio" name="municipio" onchange="GetIPS($(this).val())" required disabled>
                            <option value="0">- Seleccionar -</option>
                        </select>
                    </div>
                    <div class="col-sm-6 form-group">
                        <label class="text-secondary_asalud">Nombre Ips:</label>
                        <select class="form-control select2" id="contratista_servicios_dom_ips" name="contratista_servicios_dom_ips" required disabled>
                            <option value="0">- Seleccione una opción -</option>
                        </select>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Nombres y apellidos del usuario:</label>
                        <input type="text" class="form-control" name="nombre_apellidos" id="nombre_apellidos" maxlength="100" required />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Tipo de identificación:</label>
                        <select class="form-control select2" required id="tipoId" name="tipoId">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_tipo_documental item in ViewBag.TipoIdentificacion)
                            {
                                <option value="@item.id_ref_tipo_documental">@item.descripcion</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Número de identificación:</label>
                        <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="numero_id" id="numero_id" min="0" maxlength="10" required />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Sexo:</label>
                        <select class="form-control" required id="sexo" name="sexo">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_sexo item in ViewBag.Sexo)
                            {
                                <option value="@item.id_ref_ffmm_sexo">@item.descripcion</option>
                            }
                        </select>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Fecha nacimiento:</label>
                        <input type="date" class="datepickerr" value="" title="Este campo  es obligatorio*" style="width:100%" name="fecha_nacimiento" id="fecha_nacimiento" required />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Edad N:</label>
                        <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="edadN" id="edadN" min="0" disabled />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Edad T:</label>
                        <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="edadT" id="edadT" min="0" disabled />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Grupo Etario:</label>
                        <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="grupoEtario" id="grupoEtario" min="0" disabled />
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Departamento del usuario:</label>
                        <select class="form-control select2" required id="cod_departamento_usuario" name="cod_departamento_usuario" onchange="GetMunicipioUsuario($(this).val())">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.vw_ffmm_departamento item in ViewBag.Departamento)
                            {
                                <option value="@item.cod_departamento">@item.departamento</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-3 form-group">
                        <label class="text-secondary_asalud">Municipio del usuario:</label>
                        <select class="form-control select2" id="cod_municipio_usuario" name="cod_municipio_usuario" required disabled>
                            <option value="0">- Seleccione una opción -</option>
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Dirección</label>
                        <input type="text" class="form-control" required name="direccion_usuario" maxlength="100" id="direccion_usuario" autocomplete="off" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Barrio:</label>
                        <input type="text" class="form-control" required name="barrio" maxlength="50" id="barrio" autocomplete="off" />
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Teléfono fijo:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="telefono_usuario" id="telefono_usuario" onkeyup="ValidarLength(this.id, 10)" required />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Teléfono celular:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="celular_usuario" id="celular_usuario" onkeyup="ValidarLength(this.id, 10)" required />
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Estado de afiliación:</label>
                        <select class="form-control select2" required id="id_estado_afiliacion" name="id_estado_afiliacion">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_estado item in ViewBag.Estado)
                            {
                                <option value="@item.id_ref_ffmm_estado">@item.descripcion</option>
                            }
                        </select>

                    </div>
                    <div class="col-sm-3">

                        <label for="adscrpcion" class="text-secondary_asalud">SITIO ADSCRIPCIÓN:</label>
                        @(Html.Kendo().DropDownListFor(m => m.id_sitio_adcripcion)
                                     .Name("adscrpcion")
                                    .HtmlAttributes(new { required = "required", validationmessage = "Este Campo es Obligatorio *", style = "width:90%" })
                                     .OptionLabel("Seleccione...")
                                     .DataTextField("sitio_adscripcion")
                                     .DataValueField("sitio_adscripcion")
                                     .Filter(FilterType.Contains)
                                     .Events(events => events.Select("CustomerSelect4"))
                                     .DataSource(source =>
                                     {
                                         source.Read(read =>
                                         {
                                             read.Action("GetCascadesitio_adscripcion", "CuentasMedicas");
                                         });
                                     })
                        )
                        <span class="k-invalid-msg" data-for="adscrpcion"></span>

                    </div>
                    
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Tipo afiliación:</label>
                        <select class="form-control select2" required id="id_tipo_afiliacion" name="id_tipo_afiliacion">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_tipo_afiliacion item in ViewBag.TipoAfiliacion)
                            {
                                <option value="@item.id_ref_ffmm_tipo_afiliacion">@item.descripcion</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Grado:</label>
                        <input type="text" class="form-control" required name="grado" maxlength="50" id="grado" autocomplete="off" />
                    </div>

                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Fuerza:</label>
                        <select class="form-control select2" required id="id_fuerza" name="id_fuerza">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_fuerza item in ViewBag.Fuerza)
                            {
                                <option value="@item.id_ref_ffmm_fuerza">@item.descripcion</option>
                            }
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">DATOS AUDITORIA</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Fecha ingreso al programa:</label>
                        <input class="datepickerr" value="" title="Este campo  es obligatorio*" style="width:100%" name="fecha_ingreso_al_programa" id="fecha_ingreso_al_programa" required />
                    </div>
                    <div class="col-sm-4">
                        <label class="text-secondary_asalud">Cumple con criterios de permanencia en el programa: </label>
                        <select class="form-control select2" required id="cumple_criterios" name="cumple_criterios" onchange="ValidarCriterios()">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_sino item in ViewBag.SiNo)
                            {
                                <option value="@item.id_ref_ffmm_sino">@item.descripcion</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-6" style="display: none" id="divCriteriosQueNoCumple">
                        <br />
                        <label class="text-secondary_asalud">Criterios que no cumple: </label>
                        <textarea name="criterio_que_no_cumple" id="criterio_que_no_cumple" class="form-control" rows="4" placeholder="- Mencionar los criterios que el usuario no cumple.-" required maxlength="200"></textarea>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <input class="form-control" type="hidden" name="cie10F" id="cie10F" />
                        <label class="text-secondary_asalud">Código CIE-10 Principal: </label>
                        @(Html.Kendo().AutoComplete()
                                 .Name("descripcion_cie10_principal")
                                 .Placeholder("Seleccione...")
                                 .HtmlAttributes(new { style = "width:600px" })
                                 .DataTextField("des")

                                 .Filter(FilterType.Contains)

                                  .DataSource(source =>
                                  {
                                      source.Read(read =>
                                      {
                                          read.Action("GetCie10Principal", "CuentasMedicas");
                                      });
                                  })
                               )
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <input class="form-control" type="hidden" name="cie10S" id="cie10S" />

                        <label class="text-secondary_asalud">Código CIE-10 Secundario: </label>

                        @(Html.Kendo().AutoComplete()
                                 .Name("descripcion_cie10_secun")
                                 .Placeholder("Seleccione...")
                                 .HtmlAttributes(new { style = "width:600px" })
                                 .DataTextField("des")

                                 .Filter(FilterType.Contains)

                                  .DataSource(source =>
                                  {
                                      source.Read(read =>
                                      {
                                          read.Action("GetCie10Principal", "CuentasMedicas");
                                      });

                                  })
                               )

                    </div>

                </div>
                <br />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Última valoración médica:</label>
                        <input class="datepickerr" value="" title="Este campo  es obligatorio*" style="width:100%" name="fecha_ultima_valoracion" id="fecha_ultima_valoracion" required />
                    </div>
                </div>

                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad terapia física:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_terapia_fisica" id="cantidad_terapia_fisica" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad terapia física: </label>
                        <input type="text" class="form-control" required name="periodidad_terapia_fisica" maxlength="50" id="periodidad_terapia_fisica" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de terapia física:</label>
                        <textarea name="pertinencia_medica_terapia_fisica" id="pertinencia_medica_terapia_fisica" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad terapia de lenguaje:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_terapia_lenguaje" id="cantidad_terapia_lenguaje" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad terapia de lenguaje: </label>
                        <input type="text" class="form-control" required name="periodidad_terapia_lenguaje" maxlength="50" id="periodidad_terapia_lenguaje" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de terapia de lenguaje:</label>
                        <textarea name="pertinencia_terapia_lenguaje" id="pertinencia_terapia_lenguaje" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad terapia ocupacional:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_terapia_ocupacional" id="cantidad_terapia_ocupacional" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad terapia ocupacional: </label>
                        <input type="text" class="form-control" required name="periodidad_terapia_ocupacional" maxlength="50" id="periodidad_terapia_ocupacional" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de terapia ocupacional:</label>
                        <textarea name="pertinencia_terapia_ocupacional" id="pertinencia_terapia_ocupacional" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad terapia respiratoria:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_terapia_respiratoria" id="cantidad_terapia_respiratoria" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad terapia respiratoria: </label>
                        <input type="text" class="form-control" required name="periodidad_terapia_respiratoria" maxlength="50" id="periodidad_terapia_respiratoria" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de terapia respiratoria:</label>
                        <textarea name="pertinencia_terapia_respiratoria" id="pertinencia_terapia_respiratoria" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad terapia psicológica:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_psicologia" id="cantidad_psicologia" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad terapia psicológica: </label>
                        <input type="text" class="form-control" required name="periodidad_psicologica" maxlength="50" id="periodidad_psicologica" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de terapia psicológica:</label>
                        <textarea name="pertinencia_medica_psicologia" id="pertinencia_medica_psicologia" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Cantidad clínica de heridas:</label>
                        <input type="number" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidad_clinica_heridas" id="cantidad_clinica_heridas" min="0" required onkeyup="ValidarLength(this.id, 3)" />
                    </div>
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Periodicidad clínica de heridas: </label>
                        <input type="text" class="form-control" required name="periodidad_clinica_heridas" maxlength="50" id="periodidad_clinica_heridas" autocomplete="off" />

                    </div>
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Pertinencia médica de clínica de heridas:</label>
                        <textarea name="pertinencia_clinica_heridas" id="pertinencia_clinica_heridas" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Servicio de enfermería:</label>
                        <select class="form-control select2" required id="servicio_enfermeria" name="servicio_enfermeria" onchange="MOServicioEnfermeria()">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_sino item in ViewBag.SiNo)
                            {
                                <option value="@item.id_ref_ffmm_sino">@item.descripcion</option>
                            }
                        </select>

                    </div>
                    <div class="col-sm-3" id="divPeriodicidadEnfermeria" style="display: none">
                        <div class="row">
                            <label class="text-secondary_asalud">Horas de servicio de enfermería: </label>
                            <input type="text" class="form-control solo-numero solo-numero2 solo-numero3" name="cantidas_horas_periocidad_servicio_enfermeria" id="cantidas_horas_periocidad_servicio_enfermeria" onkeyup="ValidarLength(this.id, 3)" required />
                        </div>
                        <div class="row">
                            <label class="text-secondary_asalud">Periodicidad horas de enfermería: </label>
                            <input type="text" class="form-control" required name="periocidad_servicio_enfermeria" maxlength="50" id="periocidad_servicio_enfermeria" autocomplete="off" />
                        </div>
                    </div>
                    <div class="col-sm-6" id="divPertinenciaEnfermeria" style="display: none">
                        <label class="text-secondary_asalud">Pertinencia médica de servicio de enfermería:</label>
                        <textarea name="pertinencia_servicio_de_enfermeria" id="pertinencia_servicio_de_enfermeria" class="form-control" rows="4" placeholder="- Detalle la pertinencia.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-2">
                        <label class="text-secondary_asalud">Escala discapacidad: </label>
                        <input type="text" class="form-control" required name="escala_discapacidad" maxlength="50" id="escala_discapacidad" placeholder="Ingrese la escala de discapacidad." autocomplete="off" />
                    </div>
                    <div class="col-sm-5">
                        <label class="text-secondary_asalud">Medición según escala de discapacidad:</label>
                        <textarea name="medicion_segun_escala_discapacidad" id="medicion_segun_escala_discapacidad" class="form-control" rows="4" placeholder="- Detalle la medición de la escala de discapacidad aplicada.-" required maxlength="500"></textarea>
                    </div>
                    <div class="col-sm-5">
                        <label class="text-secondary_asalud">Otros servicios: </label>
                        <textarea name="otros_servicios" id="otros_servicios" class="form-control" rows="4" placeholder="- Describa otros servicios o procedimientos incluidos dentro del plan de manejo de los usuarios.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-2">
                    </div>
                    <div class="col-sm-5">
                        <label class="text-secondary_asalud">Plan de manejo: </label>
                        <textarea name="plan_de_manejo" id="plan_de_manejo" class="form-control" rows="4" placeholder="- Registre el plan de manejo.-" required maxlength="500"></textarea>
                    </div>
                    <div class="col-sm-5">
                        <label class="text-secondary_asalud">Objetivos terapéuticos: </label>
                        <textarea name="objetivos_terapeuticos" id="objetivos_terapeuticos" class="form-control" rows="4" placeholder="- Registre los objetivos de recuperación.-" required maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-4">
                        <label class="text-secondary_asalud">Persepción de la presetación del servicio: </label>
                        <select class="form-control select2" required id="percepcion_prestacion_servicio" name="percepcion_prestacion_servicio">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (var item in ViewBag.PercepcionLista)
                            {
                                <option value="@item">@item</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-8">
                        <label class="text-secondary_asalud">Observaciones: </label>
                        <textarea name="observaciones" id="observaciones" class="form-control" rows="4" placeholder="- Registre observaciones.-" maxlength="500"></textarea>
                    </div>
                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-3">
                        <label class="text-secondary_asalud">Tutela: </label>
                        <select class="form-control select2" required id="tutela" name="tutela" onchange="MOTutela()">
                            <option value="">-Seleccione una opción-</option>
                            @foreach (ECOPETROL_COMMON.ENTIDADES.Ref_ffmm_sino item in ViewBag.SiNo)
                            {
                                <option value="@item.id_ref_ffmm_sino">@item.descripcion</option>
                            }
                        </select>
                    </div>
                    <div id="divTutela" style="display: none">
                        <div class="col-sm-3">
                            <label class="text-secondary_asalud">Fecha tutela</label>
                            <input class="datepickerr" value="" title="Este campo  es obligatorio*" style="width:100%" name="fecha_tutela" id="fecha_tutela" onchange="validarFecha()" required />
                        </div>
                        <div class="col-sm-3">
                            <label class="text-secondary_asalud">Cobertura del fallo</label>
                            <input type="text" class="form-control" required name="cobertura_fallo" maxlength="50" id="cobertura_fallo" placeholder="Ingrese la cobertura del fallo." autocomplete="off" />
                        </div>
                        <div class="col-sm-3">
                            <label class="text-secondary_asalud">Juzgado</label>
                            <input type="text" class="form-control" required name="nombre_juzgado" maxlength="50" id="nombre_juzgado" placeholder="- Ingrese nombre del juzgado.-" autocomplete="off" />
                        </div>
                    </div>

                </div>
                <hr />
                <div class="row">
                    <div class="col-sm-6">
                        <label class="text-secondary_asalud">Concepto de auditoría médica: </label>
                        <textarea name="concepto_auditoria_med" id="concepto_auditoria_med" class="form-control" rows="4" placeholder="- Dictamine un concepto de auditoría.-" required maxlength="500"></textarea>
                    </div>
                    @*<div class="col-sm-6">
                        <label class="text-secondary_asalud">Auditor médico: </label>
                        <input type="text" class="form-control" required name="auditor_medico_concurrente" maxlength="50" id="auditor_medico_concurrente" placeholder="Nombre auditor médico concurrente." autocomplete="off" />

                    </div>*@
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="text-center">
                    <button class="button_Asalud_Guardar" id="btnguardar" type="button" onclick="ValidarFormulario()">CARGAR</button>

                </div>
            </div>
        </div>

    </form>
</div>
<br />
<br />
<script src="~/Scripts/validate.js"></script>

<script>


    $(document).ready(function () {

        $('.select2').select2({
            width: '100%'
        });

    });

    var today = new Date()
    $(".datepickerr").kendoDatePicker({
        format: "MM/dd/yyyy",
        max: new Date(today.setDate(today.getDate())),
    });
    $(".k-input").attr('readonly', true);
    $(".date").datepicker();



    $("#fecha_nacimiento").change(function () {

        var fecha = document.getElementById("fecha_nacimiento").value;
        var age = calcularEdad(fecha);
        $("#edadN").val(age);
        $("#edadT").val(age);
        var etareo = calcularGrupoEtareo(age);
        $("#grupoEtario").val(etareo);
    });

    var value = $("#cie10F").val();
    $("#descripcion_cie10_principal").change(function () {
        var au = $("#descripcion_cie10_principal").data("kendoAutoComplete");
        var selected = au.listView.selectedDataItems();

        if (selected.length > 0) {
            $("#cie10F").val(selected[0].id_cie10);
        } else {
            $("#cie10F").val("");
        }
    });

    var value = $("#cie10S").val();
    $("#descripcion_cie10_secun").change(function () {
        var au = $("#descripcion_cie10_secun").data("kendoAutoComplete");
        var selected = au.listView.selectedDataItems();

        if (selected.length > 0) {
            $("#cie10S").val(selected[0].id_cie10);
        } else {
            $("#cie10S").val("");
        }
    });

    function CustomerSelect4(e) {
        var DataItem = this.dataItem(e.item.index());
        $("#adscrpcion").val(DataItem.sitio_adscripcion);

    }

    function ValidarFormulario() {
        var validator = $("#formulario").validate();
        if (validator.form()) {
            GuardarDatos();
        }
    }

    function GuardarDatos() {

        var formData = new FormData($("form")[0]);

        var edadNVar = document.getElementById('edadN').value; formData.append('edadN', edadNVar);
        var edadTVar = document.getElementById('edadT').value; formData.append('edadT', edadTVar);
        var grupoEtarioVar = document.getElementById('grupoEtario').value; formData.append('grupoEtario', grupoEtarioVar);
        var cie10FVar = document.getElementById('cie10F').value; formData.append('cod_cie10Principal', cie10FVar);
        var cie10SVar = document.getElementById('cie10S').value; formData.append('codigo_cie10_secun', cie10SVar);



        LoadingShow();
        $.ajax({
            url: "@Url.Action("SaveCuidadosPaleativos", "CuentasMedicas")",
            type: "post",
            data: formData,
            method: 'POST',
            contentType: false,
            processData: false,

            success: function (response) {

                if (response.success) {
                    LoadingHide();
                    alert(response.message);
                    var url = "@Url.Action("CuidadosPaleativos", "CuentasMedicas")";
                    location.href = url;
                }
                else {
                    LoadingHide();
                    alert(response.message);
                }

            }

        })
    }




    function GetMunicipioIPS(a) {
        var valor = document.getElementById("departamento").value;
        if (valor != 0) {
            document.getElementById("municipio").disabled = false;
        } else {
            document.getElementById("municipio").disabled = true;
        }
        $.ajax({
            url: "@Url.Action("GetMunicipios")",
            type: "post",
            data: {
                cod_departamento: a,
            },
            success: function (data) {
                $("#municipio").empty();
                $("#municipio").html(data);
                $("#municipio").val("").trigger("change");
            }
        })
    }

    function GetMunicipioUsuario(a) {
        var valor = document.getElementById("cod_departamento_usuario").value;
        if (valor != 0) {
            document.getElementById("cod_municipio_usuario").disabled = false;
        } else {
            document.getElementById("cod_municipio_usuario").disabled = true;
        }
        $.ajax({
            url: "@Url.Action("GetMunicipios")",
            type: "post",
            data: {
                cod_departamento: a,
            },
            success: function (data) {
                $("#cod_municipio_usuario").empty();
                $("#cod_municipio_usuario").html(data);
                $("#cod_municipio_usuario").val("").trigger("change");
            }
        })
    }




    function GetIPS(a) {
        var valor = document.getElementById("municipio").value;
        if (valor != 0) {
            document.getElementById("contratista_servicios_dom_ips").disabled = false;
        } else {
            document.getElementById("contratista_servicios_dom_ips").disabled = true;
        }
        $.ajax({
            url: "@Url.Action("GetIPS")",
            type: "post",
            data: {
                cod_municipio: a,
            },
            success: function (data) {
                $("#contratista_servicios_dom_ips").empty();
                $("#contratista_servicios_dom_ips").html(data);
                $("#contratista_servicios_dom_ips").val("").trigger("change");
            }
        })
    }
    function calcularEdad(fecha) {
        var hoy = new Date();
        var cumpleanos = new Date(fecha);
        var edad = hoy.getFullYear() - cumpleanos.getFullYear();
        var m = hoy.getMonth() - cumpleanos.getMonth();

        if (m < 0 || (m === 0 && hoy.getDate() < cumpleanos.getDate())) {
            edad--;
        }

        return edad;
    }

    function calcularGrupoEtareo(age) {

        var gEtareoCalculado = "";

        if (age >= 60) {
            gEtareoCalculado = "VEJEZ";
        } else if (age >= 29) {
            gEtareoCalculado = "ADULTEZ";
        } else if (age >= 18) {
            gEtareoCalculado = "JUVENTUD";
        } else if (age >= 12) {
            gEtareoCalculado = "ADOLESCENCIA";
        } else if (age >= 6) {
            gEtareoCalculado = "INFANCIA";
        } else {
            gEtareoCalculado = "PRIMERA INFANCIA";
        }
        return gEtareoCalculado;
    }


    function GetDescripcionPrimerCie(a) {
        $.ajax({
            url: "@Url.Action("GetDescripcionCie")",
            type: "post",
            data: {
                id_cie10: a,
            },
            success: function (data) {
                $("#descripcion_cie10_principal").empty();
                $("#descripcion_cie10_principal").html(data);
                $("#descripcion_cie10_principal").val("").trigger("change");
            }
        })
    }


    function GetDescripcionSegundaCie(a) {
        $.ajax({
            url: "@Url.Action("GetDescripcionCie")",
            type: "post",
            data: {
                id_cie10: a,
            },
            success: function (data) {
                $("#descripcion_cie10_secun").empty();
                $("#descripcion_cie10_secun").html(data);
                $("#descripcion_cie10_secun").val("").trigger("change");
            }
        })
    }

    function ValidarCriterios() {
        var cumpleVar = document.getElementById("cumple_criterios").value;
        if (cumpleVar == 2) {
            document.getElementById('divCriteriosQueNoCumple').style.display = 'block';
        } else {
            document.getElementById("divCriteriosQueNoCumple").style.display = 'none';
        }
    }

    function MOServicioEnfermeria() {
        var cumpleVar = document.getElementById("servicio_enfermeria").value;
        if (cumpleVar == 1) {
            document.getElementById('divPeriodicidadEnfermeria').style.display = 'block';
            document.getElementById('divPertinenciaEnfermeria').style.display = 'block';
        } else {
            document.getElementById('divPeriodicidadEnfermeria').style.display = 'none';
            document.getElementById('divPertinenciaEnfermeria').style.display = 'none';
            document.getElementById('cantidas_horas_periocidad_servicio_enfermeria').value = "";
            document.getElementById('periocidad_servicio_enfermeria').value = "";
            document.getElementById('pertinencia_servicio_de_enfermeria').value = "";
        }
    }

    function MOTutela() {
        var cumpleVar = document.getElementById("tutela").value;
        if (cumpleVar == 1) {
            document.getElementById('divTutela').style.display = 'block';
        } else {
            document.getElementById('divTutela').style.display = 'none';
            $("#fecha_tutela").kendoDatePicker({
                format: "MM/dd/yyyy",
                max: new Date(today.setDate(today.getDate())),
                value: today
            });
            document.getElementById('nombre_juzgado').value = "";
            document.getElementById('cobertura_fallo').value = "";
        }
    }



    function ValidarLength(id, cantidadMaxima) {
        var cumpleVar = document.getElementById(''+id+'').value;
        if (cumpleVar.length >= cantidadMaxima) {
            document.getElementById('' + id + '').value = cumpleVar.substring(0, cantidadMaxima);
        }



    }


</script>

<style>

    #fieldlist {
        margin: 0 0 -1.5em;
        padding: 20px;
    }

        #fieldlist li {
            list-style: none;
            padding-bottom: 1.5em;
        }

        #fieldlist label {
            display: contents;
            padding-bottom: .6em;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 12px;
        }

    #fieldlist {
        margin: 0;
        padding: 0;
    }


        #fieldlist li.status {
            text-align: center;
        }

        #fieldlist li .k-widget:not(.k-tooltip),
        #fieldlist li .k-textbox {
            margin: 0 5px 5px 0;
        }

    #pnlcargararchivo {
        margin-top: 5%;
    }

    .error {
        color: indianred;
        font-size: 11px;
    }

    .control-label {
        font-size: 12px;
        color: #357ebd;
    }


    .Info {
        color: #800000;
        text-align: justify;
        font-weight: bold;
    }

    .Error {
        color: #800000;
        font-size: small;
        font-weight: bold;
    }

    .Tamaño {
        height: 200px;
    }

    .TamañoImag {
        height: 200px;
        position: center;
    }

    .TamañoDiv {
        position: page;
        /*width:1100px;*/
    }

    .btn-glyphicon {
        padding: 8px;
        background: #ffffff;
        margin-right: 4px;
    }

    .icon-btn {
        padding: 1px 15px 3px 2px;
        border-radius: 50px;
    }
</style>


