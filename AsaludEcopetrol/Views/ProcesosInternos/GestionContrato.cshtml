
@model ECOPETROL_COMMON.ENTIDADES.contratos_detalle
@{
    ViewBag.Title = "GESTIÓN CONTRATOS";
    Layout = "~/Views/Shared/_LayoutECOPETROL.cshtml";
    string mensajerespuesta = (string)ViewData["MensajeRta"];

}

<div class="container">
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong class="text-secondary_asalud">Gestionar</strong>
        </div>
    </div>

    <div class="panel-heading" id="mensajeRespuesta">
        @if (!String.IsNullOrEmpty(mensajerespuesta))
        {
            if (mensajerespuesta.Contains("Error"))
            {
                <label class="danger"> @Html.Raw(mensajerespuesta)</label>
            }
            else
            {
                @Html.Raw(mensajerespuesta);
            }
        }
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="panel-body">
                <form id="formulario" runat="Server" enctype="multipart/form-data" method="post" action="GestionContrato">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Número contrato:</label>
                            <input type="hidden" id="id_contrato" name="id_contrato" value="@Model.id_contrato" class="form-control" maxlength="15" readonly required>
                            <input type="hidden" id="id_cargue" name="id_cargue" value="@Model.id_cargue" class="form-control" maxlength="15" readonly required>
                            <input type="hidden" id="mensajeRespuestainput" name="mensajeRespuestainput" value="@mensajerespuesta" class="form-control" readonly required>
                            <input type="text" id="numero_contrato" name="numero_contrato" value="@Model.numero_contrato" class="form-control" maxlength="15" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Periodo finalización:</label>
                            <input type="text" id="periodo_finalizacion" name="periodo_finalizacion" value="@Model.periodo_finalizacion" class="form-control solo-numero" maxlength="4" required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Fecha inicio:</label>
                            <input type="text" id="fecha_inicio" name="fecha_inicio" value="@Model.fecha_inicio" class="form-control datepickerr" required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Fecha fin:</label>
                            <input type="text" id="fecha_fin" name="fecha_fin" value="@Model.fecha_fin" class="form-control datepickerr" required>
                        </div>
                    </div>
                    <br />

                    <div class="row">
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Estado contrato:</label>
                            <input type="text" id="estado_contrato" name="estado_contrato" value="@Model.estado_contrato" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Subcategoría contrato nombre:</label>
                            <input type="text" id="subcategoria_contrato_nombre" name="subcategoria_contrato_nombre" value="@Model.subcategoria_contrato_nombre" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Categoría nombre:</label>
                            <input type="text" id="categoria_nombre" name="categoria_nombre" value="@Model.categoria_nombre" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Lugar ejecución contrato:</label>
                            <input type="text" id="categoria_nombre" name="lugar_ejecucion_contrato" value="@Model.lugar_ejecucion_contrato" class="form-control" readonly maxlength="100" required>
                        </div>
                    </div>
                    <br />

                    <div class="row">
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Departamento ejecución contrato:</label>
                            <input type="text" id="departamento_ejecucion_contrato" name="departamento_ejecucion_contrato" value="@Model.departamento_ejecucion_contrato" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Subregional ejecución contrato:</label>
                            <input type="text" id="subregional_ejecucion_contrato" name="subregional_ejecucion_contrato" value="@Model.subregional_ejecucion_contrato" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Regional ejecución contrato:</label>
                            <input type="text" id="regional_ejecucion_contrato" name="regional_ejecucion_contrato" value="@Model.regional_ejecucion_contrato" class="form-control" maxlength="100" readonly required>
                        </div>
                        <div class="col-md-3">
                            <label class="text-secondary_asalud">Documento SAP:</label>
                            <input type="text" id="documento_SAP" name="documento_SAP" value="@Model.documento_SAP" class="form-control" maxlength="100" readonly required>
                        </div>
                    </div>
                    <br />

                    <div class="row">
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nombre gestor contratación:</label>
                            <input type="text" id="nombre_gestor_contratacion" name="nombre_gestor_contratacion" value="@Model.nombre_gestor_contratacion" class="form-control" maxlength="200" required>
                        </div>
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nombre funcionario autorizado:</label>
                            <input type="text" id="nombre_funcionario_autorizado" name="nombre_funcionario_autorizado" value="@Model.nombre_funcionario_autorizado" class="form-control" maxlength="200" required>
                        </div>
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nombre administrador / funcionario calificador:</label>
                            <input type="text" id="nombre_administrador_funcionario" name="nombre_administrador_funcionario" value="@Model.nombre_administrador_funcionario" class="form-control" maxlength="200" required>
                        </div>
                    </div>
                    <br />

                    <div class="row">
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nombre interventor:</label>
                            <input type="text" id="nombre_interventor" name="nombre_interventor" value="@Model.nombre_interventor" class="form-control" maxlength="200" required>
                        </div>
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nombre proveedor:</label>
                            <input type="text" id="nombre_proveedor" name="nombre_proveedor" value="@Model.nombre_proveedor" class="form-control" maxlength="200" required>
                        </div>
                        <div class="col-md-4">
                            <label class="text-secondary_asalud">Nit proveedor:</label>
                            <input type="text" id="nit_proveedor" name="nit_proveedor" value="@Model.nit_proveedor" class="form-control" maxlength="50" required>
                        </div>
                    </div>
                    <br />

                    <div class="row">
                        <div class="col-md-12">
                            <label class="text-secondary_asalud">Objeto contrato:</label>
                            <textarea id="objeto_contrato" name="objeto_contrato" maxlength="500" class="form-control" cols="5" rows="4"></textarea>
                            <input type="hidden" id="objetoContratoValor" name="objetoContratoValor" value="@Model.objeto_contrato" />
                        </div>
                    </div>
                    <br />
                    <br />

                    <div class="row">
                        <div class="col-md-12 text-center">
                            <button type="button" class="btn button_Asalud_Guardar" id="btnGuardar" onclick="validacionFormulaio();">ACTUALIZAR</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<script src="~/Scripts/validate.js"></script>
<script>

    $(document).ready(function () {

        $('.select2').select2({
            width: '100%'
        });

        $(".datepickerr").kendoDatePicker({
            format: "MM/dd/yyyy",
        });
        $(".k-input").attr('readonly', true);

        $('.solo-numero').keyup(function () {
            this.value = (this.value + '').replace(/[^0-9.]/g, '');
        });

        document.getElementById("objeto_contrato").innerHTML = $("#objetoContratoValor").val();

        var respuesta = $("#mensajeRespuestainput").val();
        if (respuesta != null && respuesta != "") {
            setTimeout(function () {
                $("#mensajeRespuesta").fadeOut(1500);
            }, 10000);
        }

    });

    function validacionFormulaio() {
        var validator = $("#formulario").validate();
        if (validator.form()) {
            LoadingShow();
            $("#formulario").submit();
        }
    }

</script>   